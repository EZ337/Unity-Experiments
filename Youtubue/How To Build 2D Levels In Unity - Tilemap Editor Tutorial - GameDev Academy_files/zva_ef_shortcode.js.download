(function($){$(document).ready(function(){var jSubmitBtn=$('.zva-ef-modal .zva-ef-submit'),jCloseModalBtn=$('.zva-ef-modal .zva-ef-close'),jShortCodeLink=$('.zva_ef_shortcode_link');jShortCodeLink.on('click',function(){var jZvaModal=$('.zva-shortcode-modal');var jConfirmDialog=$('#zva_ef_confirm_dialog'),jConfirmDialogContent=jConfirmDialog.find('.content');jZvaModal.find('#zva_ef_modal_img').attr('src',$(this).find('.zva_post_image_url').val());jZvaModal.find('#zva_ef_modal_img').attr('alt',$(this).find('.zva_post_title').val());jZvaModal.find('input[name="zva_ef_file_id"]').val($(this).data('file-id'));jZvaModal.find('input[name="zva_ef_post_id"]').val($(this).data('post-id'));jZvaModal.find('.zva_ef_file_title').html($(this).find('.zva_post_title').val());var attachmentId=$(this).data('file-id');if(attachmentId){jZvaModal.modal();}else{jConfirmDialogContent.html('<p>Please confirm to put the file ID within shortcode!</p>');jConfirmDialog.modal();}});jSubmitBtn.on('click',function(){var jForm=$(this).parents('.zva-ef-modal'),email=jForm.find('input[name=zva_ef_email]').val(),fileId=jForm.find('input[name=zva_ef_file_id]').val();postId=jForm.find('input[name=zva_ef_post_id]').val();if(!document.getElementById('consent').checked)return;var data={action:'zva_ef_submit',email:email,file_id:fileId,post_id:postId,};var isValidEmail=jForm.find('form')[0].checkValidity();if(!isValidEmail){return;}
jForm.hide();$('body').addClass('zva_ef_loading').append('<div class="zva_ef_loader"></div>');$.ajax({url:zva_ef_ajax.ajax_url,type:'POST',data:data,success:function(response){$('body').removeClass('zva_ef_loading').remove('.zva_ef_loader');var errorCode=response.error_code;var errorMessage=response.error_message;var jConfirmDialog=$('#zva_ef_confirm_dialog'),jConfirmDialogContent=jConfirmDialog.find('.content');jConfirmDialogContent.html(errorMessage);jConfirmDialog.modal();if(1==errorCode){fbq('track','Lead');}}});});jCloseModalBtn.on('click',function(){$.modal.close();});});})(jQuery);